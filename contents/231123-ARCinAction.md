# ARC in Action

📝 "ARC(자동 참조 카운팅)이 어떻게 작동하는지에 대한 예를 들어보겠습니다. 이 예시는 `'Person'`이라는 간단한 클래스로 시작하는데, 여기서 `'name'`이라는 저장된 상수 프로퍼티를 정의합니다."

```swift
class Person {
    let name: String
    init(name: String) {
        self.name = name
        print("\(name)가 초기화되고 있습니다.")
    }
    deinit {
        print("\(name)가 해제되고 있습니다.")
    }
}
```

📝 "`'Person'` 클래스에는 인스턴스의 `'name'` 프로퍼티를 설정하고 초기화가 진행 중임을 나타내는 메시지를 출력하는 초기화가 있습니다. `'Person'` 클래스에는 클래스의 인스턴스가 해제될 때 메시지를 출력하는 소멸자도 있습니다."

🙌 위 문장과 예시는 **"`Person` 클래스의 정의"** 에 대하여 설명하고 있습니다.
>**`'Person'`** 이라는 간단한 클래스가 정의되어 있으며, **`'name'`** 이라는 저장된 상수 프로퍼티를 가지고 있습니다.
>클래스에는 초기화자(`init`)가 있어 인스턴스의 **`'name'`** 프로퍼티를 설정하고, 인스턴스가 초기화될 때 메시지를 출력합니다.
>또한, 클래스 인스턴스가 해제될 때 메시지를 출력하는 소멸자(`deinit`)도 정의되어 있습니다.

📝 "다음 코드 스니펫은 `'Person?'` 타입의 세 변수를 정의하는데, 이는 이후 코드 스니펫에서 새 `'Person'`인스턴스에 대한 여러 참조를 설정하는 데 사용됩니다. 이 변수들은 옵셔널 타입(`'Person?'`, not `'Person'`)이므로 자동으로 `'nil'` 값으로 초기화되며, 현재 `'Person'` 인스턴스를 참조하기 있지 않습니다."

```swift
var reference1: Person?
var reference2: Person?
var reference3: Person?
```
🙌 위 문장과 예시 코드 스니펫은 **"`Person` 인스턴스에 대한 참조"** 에 대하여 설명하고 있습니다.
>세 개의 **`'Person?'`** 타입 변수(**`'reference1'`, `'reference2'`, `'reference3'`**)가 정의됩니다.
>이 변수들은 옵셔널 타입이므로 **`'nil'`** 로 초기화되며, 현재 **`'Person'`** 인스턴스를 참조하지 않습니다.

📝 "이제 새로운 `'Person'` 인스턴스를 생성하고 이 세 변수 중 하나에 할당할 수 있습니다."

```swift
reference1 = Person(name: "Rubber Duck")
// "Rubber Duck가 초기화되고 있습니다"가 출력됩니다.
```

📝 "`'Person'` 클래스의 초기화자를 호출할 때 "Rubber Duck가 초기화되고 있습니다"라는 메시지가 출력되는 것을 주목하세요. 이는 초기화가 이루어 졌음을 확인 시켜줍니다."

🙌 위 문장과 코드 스니펫은 **"인스턴스 생성 및 참조 설정"** 에 대해 설명하고 있습니다.
>새로운 **`'Person'`** 인스턴스를 생성하고 **`'reference1'`** 변수에 할당합니다.
>이때, "Rubber Duck가 초기화되고 있습니다."라는 메시지가 출력되어 초기화가 진행되었음을 확인합니다.

📝 "새로운 `'Person'` 인스턴스가 `'reference1'` 변수에 할당되었기 때문에, 이제 `'reference1'`에서 새 `'Person'`인스턴스로의 강한 참조가 있습니다. 적어도 하나의 강한 참조가 있기 때문에, ARC는 이 `'Person'`이 메모리에 유지되고 해제되지 않도록 합니다."

🙌 위 문장은 **"강한 참조의 설립"** 에 대하여 말하고 있습니다.
>새 **`'Person'`** 인스턴스는 **`'reference1'`** 변수에 할당되어, 이 변수로부터 인스턴스에 대한 강한 참조가 생성됩니다.
>ARC는 적어도 하나의 강한 참조가 존재하는 한 이 **`'Person'`** 인스턴스를 메모리에 유지합니다.

📝 "동일한 **`'Person'`** 인스턴스를 두 개의 다른 변수에 할당하면, 그 인스턴스에 대한 두 개의 강한 참조가 추가로 생성됩니다."

```swift
reference2 = reference1
reference3 = reference1
```

📝 "이제 이 하나의 **`'Person'`** 인스턴스에 대해 세 개의 강한 참조가 있습니다." 

🙌 위 문장과 코드는 **"강한 참조의 추가"** 에 대하여 설명하고 있습니다.
>동일한 **`'Person'`** 인스턴스를 **`'reference2'`** 와 **`'reference3'`** 변수에도 할당합니다.
>이제 인스턴스에는 총 세 개의 강한 참조가 있습니다.

📝 "두 변수에 **`'nil'`** 을 할당하여 이 강한 참조 중 두 개(원래 참조 포함)를 끊으면, 하나의 강한 참조만 남게 되며 **`'Person'`** 인스턴스는 해제되지 않습니다."

```swift
reference1 = nil
reference2 = nil
```

🙌 위 문장과 코드는 **"강한 참조의 해제"** 에 대하여 설명하고 있습니다.
>**`'reference1'`** 과 **`'reference2'`** 에 **`'nil'`** 을 할당하여 이 두 변수의 강한 참조를 해제합니다.
>이 시점에서 **`'Person'`** 인스턴스는 여전히 메모리에 유지됩니다.

📝 "ARC는 세 번째이자 마지막 강한 참조가 끊어질 때까지 **`'Person'`** 인스턴스를 해제하지 않습니다. 이 시점에서 **`'Person'`** 인스턴스를 더 이상 사용하지 않는 것이 분명해집니다."

```swift
reference3 = nil
// "Rubber Duck가 해제되고 있습니다."가 출력됩니다.
```

🙌 위 문장과 코드는 **인스턴스의 해제**에 대하여 설명하고 있습니다.
> 마지막으로 **`'reference3'`** 에도 **`'nil'`** 을 할당하면, 이제 **`'Person'`** 인스턴스에 대한 모든 강한 참조가 해제됩니다. ARC는 더 이상 이 인스턴스가 사용되지 않는 것으로 판단하여 인스턴스를 메모리에서 해제하고, "Rubber Duck가 해제되고 있습니다"라는 메시지를 출력합니다.
