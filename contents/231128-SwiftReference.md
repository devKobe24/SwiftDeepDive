# Swift에서의 참조(Reference)란? 🤿

Swift에서 **"참조(Reference)"** 는 객체 지향 프로그래밍에서 매우 중요한 개념으로, **하나의 객체가 다른 객체를 가리키는 것을 의미합니다.**

Swift에서 참조는 주로 클래스 인스턴스에 대한 참조로 사용됩니다.

**참조를 통해, 프로그램은 메모리에 저장된 객체를 식별하고 접근할 수 있습니다.**

Swift에서의 참조는 다음과 같은 특징을 가지고 있습니다.

## 1️⃣ 참조 타입.
- Swift의 클래스는 참조 타입(Reference Type)입니다. 이는 클래스의 인스턴스가 생성될 때, 메모리에 저장된 위치(주소)를 가리키는 참조가 생성된다는 의미입니다.
- 변수나 상수에 클래스 인스턴스를 할당할 때, 실제 인스턴스를 복사하는 것이 아니라 그 인스턴스를 가리키는 참조를 전달합니다.

## 2️⃣ 공유된 인스턴스.
- 참조를 통해 여러 변수나 상수가 동일한 인스턴스를 공유할 수 있습니다. 즉, 하나의 인스턴스에 여러 참조가 있을 수 있습니다.
- 이는 여러 곳에서 동일한 객체에 접근하고 수정할 수 있게 해주므로 편리하지만, 예기치 않은 데이터 변경이 발생할 수 있어 주의가 필요합니다.

### 2.1 하나의 인스턴스에 여러 참조가 있을 수 있다?🤔
**"하나의 인스턴스에 여러 참조가 있을 수 있다."** 는 말은 클래스의 단일 인스턴스가 여러 변수나 상수에 의해 참조될 수 있다는 뜻입니다.

Swift에서 클래스는 참조 타입이기 때문에, 클래스의 인스턴스를 변수나 상수에 할당할 때 실제 데이터의 복사본을 만드는 것이 아니라, 해당 인스턴스를 가리키는 참조를 전달합니다.

이로 인해 여러 변수나 상수가 동일한 인스턴스를 공유할 수 있게 됩니다.

이것의 의미는, 한 인스턴스에 대한 변경이 해당 인스턴스를 참조하는 모든 곳에 반영된다는 것입니다.
한 변수를 통해 객체의 상태를 변경하면, 그 객체를 참조하는 다른 모든 변수들도 그 변경을 볼 수 있습니다.

Swift에서의 예시 코드는 다음과 같습니다.

```swift
class ExampleClass {
    var value: Int
    
    init(value: Int) {
        self.value = value
    }
}

// 'ExampleClass' 인스턴스 생성
let exampleInstance = ExampleClass(value: 10)

// 'exampleInstance'를 참조하는 두 개의 변수 생성
var reference1 = exampleInstance
var reference2 = exampleInstance

// 'reference1'을 통해 인스턴스의 값을 변경
reference1.value = 20

// 'reference2'를 통해 같은 인스턴스의 값을 확인
print(reference2.value) // 출력: 20
```

이 코드에서 **`exampleInstance`** 는 **`ExampleClass`** 의 새 인스턴스를 참조합니다.
**`reference1`** 과 **`reference2`** 는 **`exampleInstance`** 를 참조하기 때문에, 같은 인스턴스를 가리킵니다.
따라서 **`reference1`** 을 통해 인스턴스의 **`value`** 속성을 변경하면, **`reference2`** 를 통해서도 동일한 변경 사항을 볼 수 있습니다.

이는 두 변수가 메모리상의 동일한 객체를 가리키고 있기 때문입니다.

## 3️⃣ 자동 참조 카운팅(ARC).
- Swift는 자동 참조 카운팅(ARC)을 사용하여 메모리 관리를 수행합니다. ARC는 프로그램이 실행되는 동안 클래스 인스턴스에 대한 참조가 몇 개 있는지 추적합니다.
- 참조 카운트가 0이 되면, 즉 더 이상 그 인스턴스를 참조하는 변수나 상수가 없을 때 ARC는 메모리에서 그 인스턴스를 자동으로 해제합니다.

## 4️⃣ 강한 참조와 약한 참조.
- Swift에서는 강한 참조(Strong Reference)와 약한 참조(Weak Reference), 미소유 참조(Unowned Reference)를 통해 메모리 관리를 수행할 수 있습니다.
- 강한 참조는 ARC가 인스턴스를 해제하지 못하게 막습니다. 약한 참조와 미소유 참조는 참조 사이클을 방지하는 데 사용되며, 참조하는 인스턴스가 해제될 때 자동으로 nil이 됩니다(약한 참조의 경우).

---

### 참고 자료 📚

- [객체 지향 프로그래밍(OOP)](https://github.com/devKobe24/SwiftDeepDive/blob/main/contents/231124-OOP.md)
- [ARC란?](https://github.com/devKobe24/SwiftDeepDive/blob/main/contents/231123-ARC.md)
