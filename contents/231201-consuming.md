# `__consuming` Intro ğŸ¤¿

ì´ë²ˆì— ì œê°€ **Swift standard library(ìŠ¤ìœ„í”„íŠ¸ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬)** ê°€ ì œê³µí•˜ëŠ” ì£¼ìš” ë°ì´í„°êµ¬ì¡° ì¤‘ í•˜ë‚˜ì¸ **"ë°°ì—´(Array)"** ë¥¼ í•™ìŠµí•˜ë©´ì„œ **`Sequence`** ë¥¼ íƒí—˜í•˜ë‹¤ê°€ **`__consuming`** ì´ë¼ëŠ” í‚¤ì›Œë“œë¥¼ ë§Œë‚˜ë²„ë ¸ìŠµë‹ˆë‹¤ ğŸ˜†

(ë©€ê³ ë„ í—˜ë‚œí•˜ê²Œ ë§Œë‚œ ìƒˆë¡œìš´ ì¹œêµ¬ëŠ” ëª»ì°¸ì§€...ğŸ¤”)

ê·¸ë˜ì„œ ì €ëŠ” ì´ ì¹œêµ¬ê°€ ì–´ë–¤ ì¹œêµ¬ì¸ì§€ ì•Œì•„ë³´ê¸°ë¡œ í–ˆë‹µë‹ˆë‹¤ í—¤í—¿

<img src = "https://github.com/devKobe24/images/blob/main/SWDD-consuming.png?raw=true"></br>

## 1ï¸âƒ£ `__consuming` ğŸ¤”?

ì´ í‚¤ì›Œë“œëŠ” í•¨ìˆ˜ê°€ **`self`** ì— ëŒ€í•´ ì†Œë¹„ì (**"consuming"**)ì´ë¼ëŠ” ê²ƒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ì¦‰, ì´ í•¨ìˆ˜ëŠ” **`self`**(ìœ„ ìŠ¤í¬ë¦°ìƒ·ì—ì„œëŠ” "ì‹œí€€ìŠ¤" ìì²´)ë¥¼ **"ì†Œë¹„"** í•˜ë©°, ì´í›„ **"self"** ëŠ” ë”ì´ìƒ ìœ íš¨í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì´ëŠ” ì£¼ë¡œ ê°’ íƒ€ì…ì— ì‚¬ìš©ë˜ë©°, í•¨ìˆ˜ í˜¸ì¶œ ì´í›„ì— í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒíƒœê°€ ë³€ê²½ë ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.** ğŸ™Œ

**`"__consuming"`** ì€ íŠ¹íˆ ì‹œí€€ìŠ¤ê°€ í•œ ë²ˆë§Œ ë°˜ë³µë  ìˆ˜ ìˆì„ ë•Œ ì¤‘ìš”í•©ë‹ˆë‹¤.
(ì˜ˆë¥¼ ë“¤ì–´, ë°˜ë³µì(**"iterator"**)ê°€ ì‹œí€€ìŠ¤ë¥¼ **"ì†Œë¹„"** í•˜ëŠ” ê²½ìš°).

### âœ… ì˜ë¬¸ì  1ï¸âƒ£ `__consuming` í‚¤ì›Œë“œì— ëŒ€í•´ ì„¤ëª…í•  ë•Œ `self` ê°€ ì™œ ë‚˜ì˜¤ëŠ”ê±°ì§€?

**`__consuming`** í‚¤ì›Œë“œì— ëŒ€í•´ ì„¤ëª…í•  ë•Œ **`self`** ì— ëŒ€í•œ ì–¸ê¸‰ì´ ë‚˜ì˜¤ëŠ” ì´ìœ ëŠ” **Swift í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì˜ ë¬¸ë§¥ìƒì—ì„œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.** (ê¸°ë³¸ê¸°ê°€ íƒ„íƒ„í•´ì•¼í•˜ëŠ” ì´ìœ !! ğŸ™‹â€â™‚ï¸)

Swiftì—ì„œ ë©”ì†Œë“œ ë‚´ë¶€ì—ì„œ **`'self'`** ëŠ” í•´ë‹¹ ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ì¦‰, ë©”ì†Œë“œê°€ ì–´ë–¤ ê°ì²´ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ê°ì²´ì˜ ë°ì´í„°ì— ì ‘ê·¼í•  ë•Œ, ì´ ê°ì²´ëŠ” ë©”ì†Œë“œ ë‚´ì—ì„œ **`self`** ë¡œ ì°¸ì¡°ë©ë‹ˆë‹¤.

ìœ„ ìŠ¤í¬ë¦°ìƒ·ì„ ë³´ë©´ **`__consuming func makeIterator() -> Iterator`** ì½”ë“œ ì¡°ê°ì—ì„œ, **`makeIterator`** ëŠ” **`Sequence`** í”„ë¡œí† ì½œì˜ ë©”ì†Œë“œë¡œ, ì‹œí€€ìŠ¤ì˜ ë°˜ë³µì(**'iterator'**)ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

ì—¬ê¸°ì„œ **`__consuming`** í‚¤ì›Œë“œëŠ” ì´ ë©”ì†Œë“œê°€ ì‹œí€€ìŠ¤ ì¸ìŠ¤í„´ìŠ¤(**`self`**)ë¥¼ ì†Œë¹„í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì´ëŠ” ë©”ì†Œë“œê°€ **`self`(ì¦‰, ì‹œí€€ìŠ¤ ì¸ìŠ¤í„´ìŠ¤)** ì— ëŒ€í•´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³ , ì´ ê³¼ì •ì—ì„œ ì‹œí€€ìŠ¤ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ì‹œí€€ìŠ¤ì˜ ìš”ì†Œë¥¼ ì†Œëª¨í•  ìˆ˜ ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

**`self`** ê°€ ì½”ë“œì— **ëª…ì‹œì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” Swiftì˜ ë¬¸ë²• ê·œì¹™ì— ë”°ë¥¸ ê²ƒì…ë‹ˆë‹¤.**
Swiftì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì†Œë“œì— ì ‘ê·¼í•  ë•Œ, í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” **`self`** í‚¤ì›Œë“œë¥¼ **ìƒëµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**
ì˜ˆë¥¼ ë“¤ì–´, **`self.x`** ëŠ” ë‹¨ìˆœíˆ **`x`** ë¡œ ì“¸ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤ì˜ **`x`** í”„ë¡œí¼í‹°ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

ğŸ’¯ ë”°ë¼ì„œ **`__consuming`** í‚¤ì›Œë“œì˜ ì„¤ëª…ì—ì„œ **`self`** ê°€ ì–¸ê¸‰ë˜ëŠ” ê²ƒì€ ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ëŠ” ì‹œí€€ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìì²´ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì—ì„œ **`self`** ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

## 2ï¸âƒ£ ì˜ˆì‹œ ì½”ë“œë¡œ `__consuming` ì´í•´í•˜ê¸°!

```swift
import Foundation

struct CountDown: Sequence {
    var start: Int

    func makeIterator() -> CountDownIterator {
        return CountDownIterator(self)
    }

    struct CountDownIterator: IteratorProtocol {
        var countDown: CountDown

        init(_ countDown: CountDown) {
            self.countDown = countDown
        }

        mutating func next() -> Int? {
            if countDown.start > 0 {
                let current = countDown.start
                countDown.start -= 1
                return current
            } else {
                return nil
            }
        }
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
let countDown = CountDown(start: 3)
for number in countDown {
    print(number)
}
```

ì´ ì½”ë“œì—ì„œ **`CountDown`** êµ¬ì¡°ì²´ëŠ” **`start`** ê°’ì—ì„œ ì‹œì‘í•˜ì—¬ 0ê¹Œì§€ ì¹´ìš´íŠ¸ë‹¤ìš´í•˜ëŠ” ì‹œí€€ìŠ¤ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
**`CountDownIterator`** ëŠ” **`IteratorProtocol`** ì„ ì¤€ìˆ˜í•˜ë©°, **`next`** ë©”ì†Œë“œë¥¼ í†µí•´ ë‹¤ìŒ ìˆ«ìë¥¼ ì œê³µí•©ë‹ˆë‹¤.

âœ… **`__consuming`** ì€ ì´ ì½”ë“œì—ì„œ ì§ì ‘ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ì§€ ì•Šì§€ë§Œ, **`makeIterator`** í•¨ìˆ˜ì˜ êµ¬í˜„ ë°©ì‹ì€ **`__consuming`** ì˜ ê°œë…ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.
**`CountDownIterator`** ëŠ” **`CountDown`** ì‹œí€€ìŠ¤ì˜ ìƒíƒœë¥¼ **'ì†Œë¹„'** í•˜ë©´ì„œ ì´í„°ë ˆì´ì…˜ì„ ì§„í–‰í•©ë‹ˆë‹¤.

> ğŸ™‹â€â™‚ï¸ Swiftì˜ ìµœì‹  ë²„ì „ì—ì„œëŠ” **`__consuming`** í‚¤ì›Œë“œê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ë©°, ê°œë°œìê°€ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ë“œë­…ë‹ˆë‹¤.

---

### ì°¸ê³ ìë£Œ ğŸ“š

- [Swiftì—ì„œì˜ Instance](https://github.com/devKobe24/SwiftDeepDive/blob/main/contents/231126-Instance.md
- [developer.apple.com - Sequence](https://developer.apple.com/documentation/swift/sequence)
- [developer.apple.com - Iterator](https://developer.apple.com/documentation/swift/sequence/iterator)
